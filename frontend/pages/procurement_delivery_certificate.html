<div class="section">
  <h2>Delivery Certificate</h2>
  <table id="del_table">
    <thead><tr><th>Item</th><th>Description</th><th>Quantity</th></tr></thead>
    <tbody></tbody>
  </table>
  <button onclick="addDelRow()">Add Item</button>
  <button onclick="submitDelivery()">Submit Delivery Certificate</button>
</div>
<script>
function addDelRow(){
  const tb=document.querySelector("#del_table tbody");
  const tr=document.createElement("tr");
  ["item","desc","qty"].forEach(()=>{const td=document.createElement("td");td.innerHTML="<input>";tb.appendChild(tr);tr.appendChild(td);});
}
async function submitDelivery(){
  const rows=Array.from(document.querySelectorAll("#del_table tbody tr"));
  const items=rows.map(tr=>{
    const [a,b,c]=Array.from(tr.querySelectorAll("input")).map(i=>i.value);
    return { item:a, description:b, quantity:c };
  });
  const res=await postJSON("/delivery-certificate",{ items });
  if(res && !res.detail) showNotice("success","Delivery certificate submitted");
  else showNotice("error","Error submitting delivery certificate");
}
addDelRow();
</script>
